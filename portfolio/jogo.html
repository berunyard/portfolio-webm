<head>
    <link rel="stylesheet" href="styles.css" />
    <script>
        var counter = 0;
        function randomNumber() {
            var number = Math.floor(Math.random() * 10);
            return number
        }
        function computerNumber() {
            var fourth = randomNumber();
            for (var i; i = 1; i++) {
                var third = randomNumber();
                var second = randomNumber();
                var first = randomNumber();
                if (third != fourth && second != fourth && second != third && first != fourth && first != third && first != second) { break }
            }
            var rnd = fourth.toString() + third.toString() + second.toString() + first.toString();
            console.log(rnd);
            return rnd;
        }
        function verifyEntry(number) {
            number = number.toString();
            verif = true;
            for (var i = 0; i < 4; i++) {
                if (number.lastIndexOf(number.charAt(i)) != i) {
                    verif = false;
                    break;
                }
            }
            return verif;
        }
        rnd = computerNumber();

        function check() {
            var userNumber = $("#try").val().toString();
            var vache = 0;
            var toreau = 0;
            if (verifyEntry(userNumber) === false) { $("#console").prepend(userNumber + " - Invalid entry or duplicated number, please try again.\r\n") } else {
                for (var n = 0; n < 4; n++) {
                    for (var i = 0; i < 4; i++) {
                        if (userNumber.charAt(i) === rnd.charAt(n) && i == n) { toreau++; } else { if (userNumber.charAt(i) === rnd.charAt(n)) { vache++; } }

                    }
                }
                counter++;
                if (toreau === 4) {
                    $("#console").prepend(userNumber + " - 4 bulls, YOU WIN after " + counter + " tries.\r\n" + "A new number has been set, play again.\r\n");
                    rnd = computerNumber();
                    counter = 0;
                }
                else { $("#console").prepend(userNumber + " - " + vache + " cow(s) and " + toreau + " bull(s), tries: " + counter + "\r\n"); }
            }
            $("#try").val("");
        }

    </script>
</head>

<body class="bodyjogo">
    <h1 class="h1jogo">Jogo da Senha</h1>
    <div class="wrapperjogo">
        <input type="number" max="9999" min="0000" placeholder="e.g. 1234" id="try" onkeydown="if (event.keyCode == 13)
                        document.getElementById('submit').click()" /><input type="submit" name="submit" id="submit"
            onclick="check()">
        <p>Console</p>
        <textarea name="console" id="console" cols="60" rows="30">A jogabilidade é assim: você insere o seu código de
            adivinhação, o computador o compara com o código secreto e lhe dá duas pistas: números de "touros" e
            "vacas". O que isto significa? Um touro é um dígito que está presente em ambos os códigos na mesma posição.
            E vaca é um dígito que está presente em ambos os códigos em posições diferentes. Por exemplo, se o código
            secreto for 2056 e você perguntar 9516, a resposta será “um touro e uma vaca” (mas você não saberá qual
            dígito é um touro e qual dígito é uma vaca). Isso é tudo!</textarea>
    </div>


</body>